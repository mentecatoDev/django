<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>14. Newspaper app - Django</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "14. Newspaper app";
        var mkdocs_page_input_path = "14_newspaper_app.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Django
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../00_por_que_django/">¿Por qué Django?</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../01_introduccion/">1. Introducción</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../02_configuracion_inicial/">2. Configuración Inicial</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../03_hello_world_app/">3. Hello World app</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../04_pages_app/">4. Pages app</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../05_message_board_app/">5. Message Board app</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../06_blog_app/">6. Blog app</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../07_formularios/">7. Formularios</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../08_cuentas_de_usuarios/">8. Cuentas de Usuarios</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../09_modelo_de_usuario_personalizado/">9. Modelo de Usuario Personalizado</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../10_autenticacion_de_usuarios/">10. Autenticación de Usuarios</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../11_bootstrap/">11. Bootstrap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../12_cambio_y_restauracion_de_contrasenas/">12. Cambio y Restauración de Contraseñas</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../13_email/">13. Email</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">14. Newspaper app</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#141-articles-app">14.1. Articles app</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#142-urls-y-vistas">14.2. URLs y Vistas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#143-editarborrar">14.3. Editar/Borrar</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#14crear-page">14.Crear Page</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusión...</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../15_permisos_y_autorizacion/">15. Permisos y Autorización</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../16_comentarios/">16. Comentarios</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../17_docker/">17. Docker</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Django</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>14. Newspaper app</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="14-newspaper-app">14. Newspaper app</h1>
<p>Habrá una página de artículos en la que los periodistas podrán publicar, establecer permisos para que sólo el autor de un artículo pueda editarlo o borrarlo, y finalmente añadir la posibilidad de que otros usuarios escriban comentarios en cada uno de ellos, lo que introducirá el concepto de <em>claves externas</em>.</p>
<h2 id="141-articles-app">14.1. Articles app</h2>
<ul>
<li>No hay reglas rígidas sobre cómo llamar a las aplicaciones, excepto que no se puede usar el nombre de una aplicación incorporada.</li>
<li>Una regla general es usar el plural del nombre de una aplicación -<code>posts</code>, <code>payments</code>, <code>users</code>, etc.- a menos que hacerlo sea obviamente incorrecto como en el caso común de <code>blog</code> donde el singular tiene más sentido.</li>
<li>Crear la aplicación para los nuevos artículos.</li>
</ul>
<pre><code class="language-bash">(news) $ python manage.py startapp articles
</code></pre>
<ul>
<li>Añadirla a <code>INSTALLED_APPS</code> y actualizar la <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">zona horaria</a> ya que se marcará la hora de los artículos.</li>
<li>Para averiguar la zona horaria correspondiente:</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; from pytz import all_timezones, common_timezones
&gt;&gt;&gt; 'Europe/Madrid' in all_timezones
True
</code></pre>
<p>FICHERO: <code>newspaper_project/settings.py</code></p>
<pre><code class="language-python">`...`

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # 3rd Party
    'crispy_forms',

    # Local
    'accounts.apps.AccountsConfig',
    'pages.apps.PagesConfig',
    'articles.apps.ArticlesConfig', # new
]

`...`

TIME_ZONE = 'Europe/Madrid'         # new
</code></pre>
<ul>
<li>Se define el modelo de base de datos con cuatro campos: <code>title</code>, <code>body</code>, <code>date</code>, y <code>author</code>.</li>
<li>Para el campo <code>autor</code> se hará referencia al modelo de usuario personalizado <code>accounts.CustomUser</code> que se ha establecido en el archivo <code>settings.py</code> como <code>AUTH_USER_MODEL</code>. Por lo tanto, si se importa la configuración podemos referirnos a ella como <code>settings.AUTH_USER_MODEL</code> o bien usando el método <code>get_user_model</code>. </li>
<li>También implementamos práctica recomendada de definir un método <code>get_absolute_url</code> desde el principio y un método <code>__str__</code> para ver el modelo en nuestra interfaz de administración.</li>
</ul>
<p>FICHERO: <code>articles/models.py</code></p>
<pre><code class="language-python">from django.contrib.auth import get_user_model
from django.db import models
from django.urls import reverse


class Article(models.Model):
    title = models.CharField(max_length=255, verbose_name='Título')
    body = models.TextField(verbose_name='Cuerpo')
    date = models.DateTimeField(auto_now_add=True, verbose_name='Fecha')
    author = models.ForeignKey(
        get_user_model(),                         # ó settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        verbose_name='Autor'
    )

    def __str__(self):
        return self.title

    def get_absolute_url(self):
        return reverse('article_detail', args=[str(self.id)])
</code></pre>
<ul>
<li>Como se tiene una nueva aplicación y modelo, es hora de hacer un nuevo archivo de migración y luego aplicarlo a la base de datos.</li>
</ul>
<pre><code class="language-bash">(news) $ python manage.py makemigrations articles
(news) $ python manage.py migrate
</code></pre>
<ul>
<li>En este punto es conveniente ir a la administración para jugar con el modelo antes de construir las urls/vistas/plantillas necesarias para mostrar los datos en el sitio web. Pero primero necesitamos actualizar <code>admin.py</code> para que se muestre la nueva aplicación.</li>
</ul>
<p>FICHERO: <code>articles/admin.py</code></p>
<pre><code class="language-python">from django.contrib import admin
from .models import Article


admin.site.register(Article)
</code></pre>
<ul>
<li>Iniciar el servidor, ir a la página de administración y añadir algunos artículos de ejemplo.<ul>
<li>No se podrá añadir la fecha porque fue añadida automáticamente por Django en nuestro nombre y no puede ser cambiada en la administración.</li>
<li>Se podrá hacer que la fecha sea editable -en aplicaciones más complejas es común tener un campo <code>created_at</code> y <code>updated_at</code>- pero para mantener las cosas simples, por ahora sólo se tendrá <code>date</code> establecida por Django al momento de la creación.</li>
</ul>
</li>
</ul>
<h2 id="142-urls-y-vistas">14.2. URLs y Vistas</h2>
<ul>
<li>Vamos a hacer que los artículos aparezcan en <code>articles/</code>.</li>
</ul>
<p>FICHERO: <code># newspaper_project/urls.py</code></p>
<pre><code class="language-python">from django.contrib import admin
from django.urls import path, include                       # new

urlpatterns = [
    path('admin/', admin.site.urls),
    path('accounts/', include('accounts.urls')),
    path('accounts/', include('django.contrib.auth.urls')),
    path('articles/', include('articles.urls')),            # new
    path('', include('pages.urls')),
]
</code></pre>
<p>FICHERO: <code>articles/urls.py</code></p>
<pre><code class="language-python">from django.urls import path
from .views import ArticleListView


urlpatterns = [
    path('', ArticleListView.as_view(), name='article_list'),
]
</code></pre>
<ul>
<li>Crear ahora la vista usando la genérica <code>ListView</code> de Django.</li>
</ul>
<p>FICHERO: <code># articles/views.py</code></p>
<pre><code class="language-python">from django.views.generic import ListView
from .models import Article


class ArticleListView(ListView):
    model = Article
    template_name = 'article_list.html'
</code></pre>
<ul>
<li>
<p>Los dos únicos campos que se necesitan especificar son el modelo de artículo y el nombre de la plantilla que será <code>article_list.html</code>.</p>
</li>
<li>
<p>El último paso es crear la plantilla.</p>
</li>
<li>
<p>Bootstrap tiene un componente incorporado llamado <code>Cards</code> que se puede personalizar para los artículos individuales. Recordar que <code>ListView</code> devuelve un objeto llamado object_list que se puede iterar con un bucle for.</p>
</li>
<li>Dentro de cada artículo se muestra el título, el cuerpo, el autor y la fecha. Incluso se proporcionan enlaces a las funciones de "editar" y "borrar" que aún no se han construido.</li>
</ul>
<p>FICHERO: <code>templates/article_list.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block title %}Articles{% endblock %}

{% block content %}
  {% for article in object_list %}
    &lt;div class=&quot;card&quot;&gt;
      &lt;div class=&quot;card-header&quot;&gt;
        &lt;span class=&quot;font-weight-bold&quot;&gt;{{ article.title }}&lt;/span&gt; &amp;middot;
        &lt;span class=&quot;text-muted&quot;&gt;por {{ article.author }} | {{ article.date }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class=&quot;card-body&quot;&gt;
        {{ article.body }}
      &lt;/div&gt;
      &lt;div class=&quot;card-footer text-center text-muted&quot;&gt;
        &lt;a href=&quot;#&quot;&gt;Editar&lt;/a&gt; | &lt;a href=&quot;#&quot;&gt;Borrar&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;br&gt;
  {% endfor %}
{% endblock content %}
</code></pre>
<ul>
<li>Arracar el servidor y consultar la página <code>articles/</code></li>
<li>Para más información de personalización consultar el siguiente <a href="https://docs.djangoproject.com/es/3.1/howto/custom-template-tags/">enlace</a></li>
</ul>
<h2 id="143-editarborrar">14.3. Editar/Borrar</h2>
<ul>
<li>Se necesitan nuevas urls, vistas y plantillas.</li>
<li>Se puede aprovechar el hecho de que Django añade automáticamente una clave primaria a cada base de datos. Por lo tanto, el primer artículo con una clave primaria de <code>1</code> estará en <code>articles/1/edit/</code> y la ruta de borrado estará en <code>articles/1/delete/</code>.</li>
</ul>
<p>FICHERO: <code>articles/urls.py</code></p>
<pre><code class="language-python">from django.urls import path
from .views import(
    ArticleListView,
    ArticleUpdateView, # new
    ArticleDetailView, # new
    ArticleDeleteView, # new
)

urlpatterns = [
    path('&lt;int:pk&gt;/edit/', ArticleUpdateView.as_view(), name='article_edit'),    # new
    path('&lt;int:pk&gt;/', ArticleDetailView.as_view(), name='article_detail'),       # new
    path('&lt;int:pk&gt;/delete/', ArticleDeleteView.as_view(), name='article_delete'),# new
    path('', ArticleListView.as_view(), name='article_list'),
]
</code></pre>
<ul>
<li>Ahora se escribirán las vistas que usarán las vistas genéricas basadas en clases de Django para <code>DetailView</code>, <code>UpdateView</code> y <code>DeleteView</code>. Especificamos qué campos pueden ser actualizados -<code>title</code> y <code>body</code>- y dónde redirigir al usuario después de borrar un artículo: <code>article_list</code>.</li>
</ul>
<p>FICHERO: <code>articles/views.py</code></p>
<pre><code class="language-python">from django.views.generic import ListView, DetailView
from django.views.generic.edit import UpdateView, DeleteView
from django.urls import reverse_lazy
from .models import Article


class ArticleListView(ListView):
    model = Article
    template_name = 'article_list.html'


class ArticleDetailView(DetailView):
    model = Article
    template_name = 'article_detail.html'


class ArticleUpdateView(UpdateView):
    model = Article
    fields = ['title', 'body', ]
    template_name = 'article_edit.html'


class ArticleDeleteView(DeleteView):
    model = Article
    template_name = 'article_delete.html'
    success_url = reverse_lazy('article_list')
</code></pre>
<ul>
<li>Finalmente se necesita añadir las nuevas plantillas.</li>
</ul>
<pre><code class="language-bash">(news) $ touch templates/article_detail.html
(news) $ touch templates/article_edit.html
(news) $ touch templates/article_delete.html
</code></pre>
<ul>
<li>
<p>Se empezará con la página de detalles que mostrará el título, la fecha, el cuerpo y el autor con enlaces para editar y borrar. También enlazará hacia atrás con todos los artículos.</p>
</li>
<li>
<p>El nombre de la ruta de edición es <code>article_edit</code> y tenemos que pasarle su clave principal <code>article.pk</code>.</p>
</li>
<li>
<p>El nombre de la ruta de borrado es <code>article_delete</code> y también necesita una clave primaria <code>article.pk</code>.</p>
</li>
<li>
<p>La página de artículos es una <code>ListView</code> por lo que no necesita que se le pase ningún argumento adicional.</p>
</li>
</ul>
<p>FICHERO: <code>templates/article_detail.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block content %}
  &lt;div class=&quot;article-entry&quot;&gt;
    &lt;h2&gt;{{ object.title }}&lt;/h2&gt;
      &lt;p&gt;por {{ object.author }} | {{ object.date }}&lt;/p&gt;
      &lt;p&gt;{{ object.body }}&lt;/p&gt;
  &lt;/div&gt;
  &lt;p&gt;&lt;a href=&quot;{% url 'article_edit' article.pk %}&quot;&gt;Editar&lt;/a&gt; | &lt;a href=&quot;{% url 'article_delete' article.pk %}&quot;&gt;Borrar&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;Volver a la &lt;a href=&quot;{% url 'article_list' %}&quot;&gt;lista de artículos&lt;/a&gt;.&lt;/p&gt;
{% endblock content %}
</code></pre>
<ul>
<li>Para las páginas de edición y borrado se puede usar el estilo del botón de Bootstrap para hacer que el botón de edición sea azul claro y el de borrado rojo.</li>
</ul>
<p>FICHERO: <code>templates/article_edit.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block content %}
  &lt;h1&gt;Editar&lt;/h1&gt;
  &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;{% csrf_token %}
    {{ form.as_p }}
    &lt;button class=&quot;btn btn-info ml-2&quot; type=&quot;submit&quot;&gt;Actualizar&lt;/button&gt;
  &lt;/form&gt;
{% endblock %}
</code></pre>
<p>FICHERO: <code>templates/article_delete.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block content %}
  &lt;h1&gt;Borrar&lt;/h1&gt;
  &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;{% csrf_token %}
    &lt;p&gt;¿Estás seguro de que quieres borrar &quot;{{ article.title }}&quot;?&lt;/p&gt;
    &lt;button class=&quot;btn btn-danger ml- &quot; type=&quot;submit&quot;&gt;Confirmar&lt;/button&gt;
  &lt;/form&gt;
{% endblock %}
</code></pre>
<ul>
<li>Como paso final se añaden los enlaces de edición y borrado a la página de listas en la clase <code>div</code> para el <code>card-foot</code>. Serán los mismos que los añadidos a la página detalle.</li>
</ul>
<p>FICHERO: <code>templates/article_list.html</code></p>
<pre><code class="language-html">`...`
      &lt;div class=&quot;card-footer text-center text-muted&quot;&gt;
        &lt;a href=&quot;{% url 'article_edit' article.pk %}&quot;&gt;Editar&lt;/a&gt; |
        &lt;a href=&quot;{% url 'article_delete' article.pk %}&quot;&gt;Borrar&lt;/a&gt;
      &lt;/div&gt;
`...`
</code></pre>
<ul>
<li>Arrancar el servidor e ir a la página de <code>articles/</code> y pulsar sobre <code>Edit</code>.</li>
<li>Si se actualiza el campo "título" y se hace clic en actualizar, el usuario será redirigido a la página de detalles que mostrará el nuevo cambio.</li>
<li>Si se hace clic en el enlace <code>Delete</code> el usuario será redirigido a la página de borrado.</li>
<li>Si se presiona el aterrador botón rojo <code>Confirm</code> el usuario será redirigido a la página de artículos donde ahora habrá una entrada menos.</li>
</ul>
<h2 id="14crear-page">14.Crear Page</h2>
<p>El paso final es una página de creación de nuevos artículos que podemos hacer con el <code>CreateView</code> de Django. Nuestros tres pasos son crear una vista, una url y una plantilla. Este flujo ya debería resultar bastante familiar. En nuestro archivo de vistas agregamos <code>CreateView</code> a las importaciones de la parte superior y hacemos una nueva clase <code>ArticleCreateView</code> que especifica nuestro modelo, plantilla y los campos disponibles.</p>
<p>FICHERO: <code>articles/views.py</code></p>
<pre><code class="language-python">`...`
from django.views.generic.edit import (
    CreateView,
    UpdateView,
    DeleteView
)
`...`
class ArticleCreateView(CreateView):
    model = Article
    template_name = 'article_new.html'
    fields = ('title', 'body', 'author',)
</code></pre>
<p>Nótese que nuestros campos tienen autor ya que queremos asociar un nuevo artículo con un autor, sin embargo una vez que un artículo ha sido creado no queremos que un usuario pueda cambiar el autor, por lo que ArticleUpdateView sólo tiene los campos ['title', 'body',] .
Actualizar nuestro archivo de urls con la nueva ruta para la vista.</p>
<p>FICHERO: <code>articles/urls.py</code></p>
<pre><code class="language-python">from django.urls import path
from .views import (
    ArticleListView,
    ArticleUpdateView,
    ArticleDetailView,
    ArticleDeleteView,
    ArticleCreateView, # new
)

urlpatterns = [
    path('&lt;int:pk&gt;/edit/', ArticleUpdateView.as_view(), name='article_edit'),
    path('&lt;int:pk&gt;/', ArticleDetailView.as_view(), name='article_detail'),
    path('&lt;int:pk&gt;/delete/',ArticleDeleteView.as_view(), name='article_delete'),
    path('new/', ArticleCreateView.as_view(), name='article_new'), # new
    path('', ArticleListView.as_view(), name='article_list'),
]
</code></pre>
<p>Luego, salga del servidor Control+c para crear una nueva plantilla llamada <code>article_new.html</code>.</p>
<pre><code>(news) $ touch templates/article_new.html
</code></pre>
<p>Y actualizarlo con el siguiente código HTML.</p>
<p>FICHERO: <code>templates/article_new.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block content %}
    &lt;h1&gt;Nuevo artículo&lt;/h1&gt;
    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;{% csrf_token %}
        {{ form.as_p }}
        &lt;button class=&quot;btn btn-success ml- &quot; type=&quot;submit&quot;&gt;Guardar&lt;/button&gt;
    &lt;/form&gt;
{% endblock content %}
</code></pre>
<p>Como paso final deberíamos añadir un enlace para crear nuevos artículos en nuestro navegador para que sea accesible en todas partes del sitio para los usuarios registrados.</p>
<p>FICHERO: <code>templates/base.html</code></p>
<pre><code class="language-html">&lt;body&gt;
  &lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-dark&quot;&gt;
    &lt;a class=&quot;navbar-brand&quot; href=&quot;{% url 'home' %}&quot;&gt;Newspaper&lt;/a&gt;
    {% if user.is_authenticated %}
      &lt;ul class=&quot;navbar-nav mr-auto&quot;&gt;
        &lt;li class=&quot;nav-item&quot;&gt;
          &lt;a href=&quot;{% url 'article_new' %}&quot;&gt;+ Nuevo&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    {% endif %}
`...`
</code></pre>
<p>¿Y por qué no usar Bootstrap para mejorar nuestra página web original ahora también? Podemos actualizar <code>templates/home.html</code> como sigue.</p>
<p>FICHERO: <code>templates/home.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block title %}Home{% endblock title %}

{% block content %}
  &lt;br/&gt;
  &lt;div class=&quot;jumbotron&quot;&gt;
    &lt;h1 class=&quot;display-4&quot;&gt;Newspaper app&lt;/h1&gt;
    &lt;p class=&quot;lead&quot;&gt;Un Periódico con Django.&lt;/p&gt;
    &lt;p class=&quot;lead&quot;&gt;
      &lt;a class=&quot;btn btn-primary btn-lg&quot; href=&quot;{% url 'article_list' %}&quot;
      role=&quot;button&quot;&gt;Ver los artículos&lt;/a&gt;
    &lt;/p&gt;
  &lt;/div&gt;
{% endblock content %}
</code></pre>
<p>Ya hemos terminado. Vamos a confirmar que todo funciona como se esperaba. Arranca el servidor de nuevo <code>python manage.py runserver</code> y navega a nuestra página web en: http://127.0.0.1:8000/.</p>
<p>Haz clic en el enlace "+ Nuevo" en la parte superior del navegador y serás redirigido a nuestra página de creación.</p>
<p>Adelante, crea un nuevo artículo. Luego haz clic en el botón "Guardar". Serás redirigido a la página de detalles. ¿Por qué? Porque en nuestro archivo <code>models.py</code> establecemos el método <code>get_absolute_url</code> en <code>article_detail</code>. Este es un buen enfoque porque si más tarde cambiamos el patrón de url de la página de detalles a, digamos, <code>articles/details/4/</code> , la redirección seguirá funcionando. Se utilizará cualquier ruta asociada a <code>article_detail</code>; no hay código duro para la ruta en sí misma.</p>
<p>Ten en cuenta también que la clave principal aquí está en el URL. Aunque sólo estamos mostrando tres artículos ahora mismo, Django no reordena las claves primarias sólo porque hayamos borrado una. En la práctica, la mayoría de los sitios del mundo real no borran nada; en su lugar, "ocultan" los campos borrados, ya que esto facilita el mantenimiento de la integridad de una base de datos y da la opción de "recuperar" más adelante si es necesario. Con nuestro enfoque actual, una vez que algo se borra, ¡se va para siempre!
Haga clic en el enlace de "Todos los artículos" para ver nuestra nueva página de artículos.</p>
<p>Hay un nuevo artículo en la parte inferior, como se esperaba.</p>
<h2 id="conclusion">Conclusión...</h2>
<p>Hemos creado una aplicación de artículos dedicados con la funcionalidad de CRUD. Pero aún no hay permisos o autorizaciones, lo que significa que cualquiera puede hacer cualquier cosa. Un usuario desconectado puede visitar todas las URLs y cualquier usuario conectado puede editar o eliminar un artículo existente, ¡incluso uno que no sea suyo! En el próximo capítulo añadiremos permisos y autorizaciones a nuestro proyecto para arreglar esto.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../13_email/" class="btn btn-neutral float-left" title="13. Email"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../15_permisos_y_autorizacion/" class="btn btn-neutral float-right" title="15. Permisos y Autorización">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../13_email/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../15_permisos_y_autorizacion/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
