<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>8. Cuentas de Usuarios - Django</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "8. Cuentas de Usuarios";
    var mkdocs_page_input_path = "08_cuentas_de_usuarios.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Django</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../00_por_que_django/">¿Por qué Django?</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../01_introduccion/">1. Introducción</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../02_configuracion_inicial/">2. Configuración Inicial</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../03_hello_world_app/">3. Hello World app</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../04_pages_app/">4. Pages app</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../05_message_board_app/">5. Message Board app</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../06_blog_app/">6. Blog app</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../07_formularios/">7. Formularios</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">8. Cuentas de Usuarios</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#81-login">8.1. Login</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#82-actualizado-de-la-homepage">8.2. Actualizado de la homepage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#83-enlace-para-logout">8.3. Enlace para Logout</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#84-inscripcion">8.4. Inscripción</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#85-git">8.5. Git</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#86-configuracion-de-heroku">8.6. Configuración de Heroku</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#87-despliegue-en-heroku">8.7. Despliegue en Heroku</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#88-conclusion">8.8. Conclusión</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../09_modelo_de_usuario_personalizado/">9. Modelo de Usuario Personalizado</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../10_autenticacion_de_usuarios/">10. Autenticación de Usuarios</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../11_bootstrap/">11. Bootstrap</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../12_cambio_y_restauracion_de_contrasenas/">12. Cambio y Restauración de Contraseñas</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../13_email/">13. Email</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../14_newspaper_app/">14. Newspaper app</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../15_permisos_y_autorizacion/">15. Permisos y Autorización</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../16_comentarios/">16. Comentarios</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../17_docker/">17. Docker</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../portfolio/portfolio/">Portafolio</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Django</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>8. Cuentas de Usuarios</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="8-cuentas-de-usuarios">8. Cuentas de Usuarios</h1>
<ul>
<li>La mayoría de las aplicaciones web cuentan con una importante pieza: la <strong>autenticación del usuario</strong>.</li>
<li>La implementación de una autenticación de usuario adecuada es conocida por su dificultad</li>
<li>Afortunadamente Django viene con un poderoso sistema de autenticación de usuarios <strong>incorporado</strong>.</li>
<li>
<p>Cada vez que se crea un nuevo proyecto, Django instala por defecto la aplicación de autenticación, que proporciona un objeto de usuario que contiene:</p>
</li>
<li>
<p>Nombre de Usuario</p>
</li>
<li>Contraseña</li>
<li>Correo Electrónico</li>
<li>Nombre</li>
<li>Apellidos</li>
</ul>
<h2 id="81-login">8.1. Login</h2>
<ul>
<li>
<p>Se usará este objeto usuario para implementar:</p>
</li>
<li>
<p>El inicio de sesión</p>
</li>
<li>El cierre de sesión</li>
<li>
<p>El registro en la aplicación del blog</p>
</li>
<li>
<p>Django proporciona una vista predeterminada para una página de inicio de sesión a través de <code>LoginView</code>.</p>
</li>
<li>
<p>Todo lo que se necesita es:</p>
<ul>
<li>Añadir un patrón de url a nivel de proyecto para el sistema de autorización</li>
<li>Una plantilla de inicio de sesión</li>
<li>Una pequeña actualización del fichero <code>settings.py</code></li>
</ul>
</li>
<li>
<p>Actualizar el archivo <code>urls.py</code> a nivel de proyecto</p>
</li>
<li>Se colocaran las páginas de <em>login</em> y <em>logout</em> en la URL <code>accounts/</code>.</li>
</ul>
<p>FICHERO: <code>blog_project/urls.py</code></p>
<pre><code class="language-python">from django.contrib import admin
from django.urls import path, include


urlpatterns = [
    path('admin/', admin.site.urls),
    path('accounts/', include('django.contrib.auth.urls')), # new
    path('', include('blog.urls')),
]
</code></pre>
<ul>
<li>Como se indica en la documentación de <code>LoginView</code>, por defecto Django buscará dentro de una carpeta de plantillas llamada <code>registration</code> un archivo llamado <code>login.html</code> para un formulario de inicio de sesión. Así que tenemos que crear un nuevo directorio llamado <code>registration</code> y el archivo requerido dentro de él.</li>
</ul>
<pre><code class="language-bash">(blog) $ mkdir templates/registration
(blog) $ touch templates/registration/login.html
</code></pre>
<p>FICHERO: <code>templates/registration/login.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block content %}
&lt;h2&gt;Login&lt;/h2&gt;
&lt;form method=&quot;post&quot;&gt;
  {% csrf_token %}
  {{ form.as_p }}
  &lt;button type=&quot;submit&quot;&gt;Login&lt;/button&gt;
&lt;/form&gt;
{% endblock content %}
</code></pre>
<ul>
<li>Se usan las etiquetas HTML <form></form> con el método POST ya que se está enviando datos al servidor (se usa GET si se están solicitando datos, como en un formulario de un motor de búsqueda). Se añade <code>{% csrf_token %}</code> por motivos de seguridad, es decir, para evitar ataques XSS. El contenido del formulario se muestra entre las etiquetas de los párrafos gracias a <code>{{ form.as_p }}</code> y luego se añade un botón "enviar" (<code>submit</code>).</li>
<li>En el paso final hay que especificar dónde redirigir al usuario cuando el acceso es exitoso. Podemos establecer esto con la configuración <code>LOGIN_REDIRECT_URL</code>. En la parte inferior del archivo <code>settings.py</code> agregar:
  FICHERO: <code>settings.py</code></li>
</ul>
<pre><code class="language-python">LOGIN_REDIRECT_URL = 'home'
</code></pre>
<ul>
<li>
<p>Ahora el usuario será redirigido a la plantilla <code>home</code> que es la página de inicio.
  Navegar ahora a: http://127.0.0.1:8000/accounts/login/</p>
</li>
<li>
<p>Al introducir la información de acceso de la cuenta de superusuario, seremos redirigidos a la página de inicio.</p>
</li>
<li>Nótese que no se ha añadido ninguna lógica de visualización ni se ha creado un modelo de base de datos porque el sistema de autentificación de Django los proporcionó automáticamente.</li>
</ul>
<h2 id="82-actualizado-de-la-homepage">8.2. Actualizado de la homepage</h2>
<ul>
<li>Actualizar la plantilla <code>base.html</code> para mostrar un mensaje a los usuarios tanto si están conectados como si no.</li>
<li>Se puede usar el atributo <code>is_authenticated</code> para esto.</li>
<li>Por ahora, se pondrá este código en una posición preeminente. Más adelante se le podrá dar un estilo más apropiado.</li>
</ul>
<p>FICHERO: <code>templates/base.html</code></p>
<pre><code class="language-html">...
&lt;/header&gt;
{% if user.is_authenticated %}
  &lt;p&gt;¡Hola {{ user.username }}!&lt;/p&gt;
{% else %}
  &lt;p&gt;No estás logueado&lt;/p&gt;
  &lt;a href=&quot;{% url 'login' %}&quot;&gt;login&lt;/a&gt;
{% endif %}
{% block content %}
{% endblock content %}
</code></pre>
<ul>
<li>Si el usuario está conectado, se le saludará por su nombre, si no,  se le dará un enlace a la recién creada página de acceso.</li>
</ul>
<h2 id="83-enlace-para-logout">8.3. Enlace para Logout</h2>
<ul>
<li>Se añade un enlace de cierre de sesión que redirija a la página de inicio.</li>
<li>Gracias al sistema de autentificación de Django, esto es muy sencillo de conseguir.</li>
<li>En el archivo <code>base.html</code> se agrega un enlace de una línea <code>{% url 'logout' %}</code> para desconectarse.</li>
</ul>
<p>FICHERO: <code>templates/base.html</code></p>
<pre><code class="language-html">...
{% if user.is_authenticated %}
  &lt;p&gt;¡Hola {{ user.username }}!&lt;/p&gt;
  &lt;p&gt;&lt;a href=&quot;{% url 'logout' %}&quot;&gt;logout&lt;/a&gt;&lt;/p&gt;
{% else %}
...
</code></pre>
<ul>
<li>Eso es todo lo que se necesita hacer ya que la vista necesaria proporciona una app de autenticación <code>auth</code>. Aún se necesita especificar dónde redirigir al usuario al cerrar la sesión.</li>
<li>Actualizar <code>settings.py</code> para proporcionar un enlace de redireccionamiento que se llama, apropiadamente, <code>LOGOUT_REDIRECT_URL</code>. Podemos añadirlo justo al lado de nuestra redirección de inicio de sesión, de manera que la parte inferior del archivo tenga el siguiente aspecto:</li>
</ul>
<p>FICHERO: <code>blog_project/settings.py</code></p>
<pre><code class="language-python">LOGIN_REDIRECT_URL = 'home'
LOGOUT_REDIRECT_URL = 'home'
</code></pre>
<h2 id="84-inscripcion">8.4. Inscripción</h2>
<p>Se necesita escribir una vista propia para la página de registro de nuevos usuarios, pero Django  proporciona una clase formulario, <code>UserCreationForm</code>, para facilitar las cosas. </p>
<blockquote>
<p>Por defecto viene con tres campos: nombre de usuario, contraseña y contraseña.</p>
</blockquote>
<p>Hay muchas maneras de organizar el código y la estructura de las urls para un sistema de autenticación de usuario robusto. Aquí se creará una nueva aplicación dedicada, <code>accounts</code>, para la página de registro.</p>
<pre><code class="language-bash">(blog) $ python manage.py startapp accounts
</code></pre>
<ul>
<li>Añadir la nueva app a INSTALLED_APPS del fichero <code>settings.py</code>.
FICHERO: <code>blog_project/settings.py</code></li>
</ul>
<pre><code class="language-python">INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'blog.apps.BlogConfig',
    'accounts.apps.AccountsConfig',
]
</code></pre>
<ul>
<li>A continuación añadimos una url a nivel de proyecto que apunta a esta nueva aplicación directamente debajo de donde incluimos la aplicación de autorización incorporada.
FICHERO: <code>blog_project/urls.py</code></li>
</ul>
<pre><code class="language-python">from django.contrib import admin
from django.urls import path, include


urlpatterns = [
    path('admin/', admin.site.urls),
    path('accounts/', include('django.contrib.auth.urls')),
    path('accounts/', include('accounts.urls')),            # new
    path('', include('blog.urls')),
]
</code></pre>
<ul>
<li>El orden de las <code>urls</code> importa porque Django lee este archivo de arriba a abajo. Por lo tanto, cuando se solicite la url <code>/accounts/signup</code>, Django buscará primero en el archivo <code>auth</code>, no lo encontrará, y luego procederá a la aplicación <code>accounts</code> de cuentas.</li>
</ul>
<pre><code class="language-bash">(blog) $ touch accounts/urls.py
</code></pre>
<p>...y añade el siguiente código:
FICHERO: <code>accounts/urls.py</code></p>
<pre><code class="language-python">from django.urls import path
from . import views


urlpatterns = [
    path('signup/', views.SignUpView.as_view(), name='signup'),
]
</code></pre>
<ul>
<li>Se está usando una vista que aún no se ha creado llamada  <code>SignupView</code> que está basada en clases, ya que está en mayúsculas, y tiene el sufijo <code>as_view()</code>. Su ruta es sólo <code>signup/</code> por lo que la ruta general será <code>accounts/signup/</code>.</li>
<li>Ahora para la vista que usa el <code>UserCreationForm</code> incorporado y el <code>CreateView</code> genérico .
FICHERO: <code>accounts/views.py</code></li>
</ul>
<pre><code class="language-python">from django.contrib.auth.forms import UserCreationForm
from django.urls import reverse_lazy
from django.views.generic import CreateView


class SignUpView(CreateView):
    form_class = UserCreationForm
    success_url = reverse_lazy('login')
    template_name = 'signup.html'
</code></pre>
<ul>
<li>Se está heredando de la vista genérica basada en clases <code>CreateView</code> la clase <code>SignUpView</code>. Se especifica el uso del <code>UserCreationForm</code> incorporado y la plantilla, aún no creada,  <code>signup.html</code>. Y se usa <code>reverse_lazy</code> para redirigir al usuario a la página de inicio de sesión cuando se registra con éxito.</li>
<li>¿Por qué usar aquí <code>reverse_lazy</code> en lugar de <code>reverse</code>? La razón es que para todas las vistas genéricas basadas en clases las urls no se cargan cuando se importa el archivo, por lo que tenemos que usar la forma perezosa de <code>reverse</code> para cargarlas más tarde cuando estén disponibles.</li>
<li>Añadir <code>signup.html</code> a la carpeta de plantillas a nivel de proyecto:</li>
</ul>
<pre><code class="language-bash">(blog) $ touch templates/signup.html
</code></pre>
<p>TEMPLATE: <code>templates/signup.html</code></p>
<pre><code class="language-html">{% extends 'base.html' %}

{% block content %}
  &lt;h2&gt;Sign up&lt;/h2&gt;
  &lt;form method=&quot;post&quot;&gt;
    {% csrf_token %}
    {{ form.as_p }}
    &lt;button type=&quot;submit&quot;&gt;Sign up&lt;/button&gt;
  &lt;/form&gt;
{% endblock %}
</code></pre>
<ul>
<li>Al principio se extiende la plantilla base, se coloca la lógica entre las etiquetas <code>&lt;form&gt;&lt;/form&gt;</code>, y se usa <code>csrf_token</code> por seguridad. El contenido del formulario se muestra en etiquetas de párrafo con <code>form.as_p</code> y se incluye un botón de envío.</li>
<li>Navegar en: http://127.0.0.1:8000/accounts/signup/</li>
<li>Observar que hay mucho texto extra que Django incluye por defecto. Se puede personalizar usando el <em>marco de mensajes</em> incorporado, pero por ahora probar el formulario.</li>
<li>Crear un nuevo usuario llamado "William" y comprobar como al enviarlo se redirige a la página de acceso y de como, después de ingresar exitosamente, se redirige a la página de inicio con el saludo personalizado <code>Hola William</code>.</li>
<li>El último flujo es, por lo tanto:</li>
</ul>
<p><center>Inscripción (Signup) -&gt; Inicio de sesión (Login) -&gt; Página de inicio (Homepage)</center>
- Y por supuesto podemos modificar esto como queramos. La <code>SignupView</code> se redirige a la entrada al sistema (login) porque se establece <code>success_url = reverse_lazy('login')</code>. La página de <em>login</em> se redirige a la <em>homepage</em> porque en el archivo <code>settings.py</code> se establece <code>LOGIN_REDIRECT_URL = 'home'</code>.</p>
<blockquote>
<p>Al principio puede parecer abrumador llevar la cuenta de todas las partes de un proyecto Django. Eso es normal. Con el tiempo empezarán a tener más sentido.</p>
</blockquote>
<h2 id="85-git">8.5. Git</h2>
<pre><code class="language-bash">(blog) $ git commit -m 'Añade formulario para crear cuentas de usuario'
</code></pre>
<p>Crear un nuevo repo en GitHub al que se puede llamar como se desee.</p>
<pre><code class="language-bash">(blog) $ git remote add origin git@bitbucket.org:wsvincent/blog-app.git
(blog) $ git push -u origin master
</code></pre>
<h2 id="86-configuracion-de-heroku">8.6. Configuración de Heroku</h2>
<ul>
<li>Hay cuatro cambios que hacer para el despliegue en Heroku.</li>
<li>actualizar <code>Pipfile.lock</code></li>
<li>nuevo <code>Procfile</code></li>
<li>instalar <code>gunicorn</code></li>
<li>actualizar <code>settings.py</code></li>
</ul>
<p>FICHERO: <code>Pipfile</code></p>
<pre><code class="language-pipfile">[requires]
python_version = &quot;3.9&quot;
</code></pre>
<pre><code class="language-bash">(blog) $ pipenv lock
</code></pre>
<pre><code class="language-bash">(blog) $ touch Procfile
</code></pre>
<p>FICHERO: <code>Procfile</code></p>
<pre><code>web: gunicorn blog_project.wsgi --log-file -
</code></pre>
<pre><code class="language-bash">(blog) $ pipenv install gunicorn
</code></pre>
<p>FICHERO: <code>blog_project/settings.py</code></p>
<pre><code class="language-python">ALLOWED_HOSTS = ['*']
</code></pre>
<pre><code class="language-bash">(blog) $ git status
(blog) $ git add -A
(blog) $ git commit -m 'Añade ficheros de configuración Heroku'
(blog) $ git push -u origin master
</code></pre>
<h2 id="87-despliegue-en-heroku">8.7. Despliegue en Heroku</h2>
<pre><code class="language-bash">(blog) $ heroku login
</code></pre>
<ul>
<li>"Create" indica a Heroku que haga un nuevo contenedor para la aplicación. Si sólo se ejecuta <code>heroku create</code>, Heroku asignará un nombre al azar, aunque se puede especificar un nombre personalizado, que debe ser único en Heroku.</li>
</ul>
<pre><code class="language-bash">(blog) $ heroku create dfb-blog
</code></pre>
<ul>
<li>Ahora configurar git de manera que cuando se suba a Heroku (push), vaya al nombre de la nueva aplicación (reemplazar <code>dfb-blog</code> con el nombre elegido).</li>
</ul>
<pre><code class="language-bash">(blog) $ heroku git:remote -a dfb-blog
</code></pre>
<ul>
<li>Hay un paso más que debemos dar ahora que tenemos archivos estáticos, en este caso CSS. Django no soporta servir archivos estáticos en producción, sin embargo el proyecto <code>WhiteNoise</code> sí lo hace. Así que vamos a instalarlo.</li>
</ul>
<pre><code class="language-bash">(blog) $ pipenv install whitenoise
</code></pre>
<ul>
<li>Hay que actualizar la configuración estática para que se use en producción. En el editor de texto abrir <code>settings.py</code> . Añadir <code>whitenoise</code> a <code>INSTALLED_APPS</code> encima de la aplicación de archivos estáticos incorporada y también a <code>MIDDLEWARE</code> en la tercera línea. El orden importa tanto para <code>INSTALLED_APPS</code> como para <code>MIDDLEWARE</code>.
  En la parte inferior del archivo añadir nuevas líneas tanto para <code>STATIC_ROOT</code> como para <code>STATICFILES_STORAGE</code>. Debería verse lo siguiente:</li>
</ul>
<p>FICHERO: <code>blog_project/settings.py</code></p>
<pre><code class="language-python">INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'whitenoise.runserver_nostatic',                            # new!
    'django.contrib.staticfiles',
    'blog',
    'accounts',
]
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware',               # new!
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]
...
STATIC_ROOT = str(BASE_DIR.joinpath('staticfiles')) # new!
STATIC_URL = '/static/'
STATICFILES_DIRS = [str(BASE_DIR.joinpath('static'))]
STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage' # new!
</code></pre>
<pre><code class="language-bash">(blog) $ git add -A
(blog) $ git commit -m 'Heroku config'
(blog) $ git push origin master
</code></pre>
<p>Finalmente podemos subir el código a Heroku y añadir un proceso web para que el banco de pruebas se ponga en marcha.</p>
<pre><code class="language-bash">(blog) $ git push heroku master
(blog) $ heroku ps:scale web=1
</code></pre>
<h2 id="88-conclusion">8.8. Conclusión</h2>
<p>Con una mínima cantidad de código, el framework de Django nos ha permitido crear un flujo de autenticación de usuario de inicio de sesión, cierre de sesión y registro. Bajo el capó, se han cubierto muchos problemas de seguridad que pueden surgir si se intenta crear un flujo de autenticación de usuario propio desde cero.</p>
<p>|\/| [- || ~|~ [- ( /\ ~|~ () ^/_ '|</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../09_modelo_de_usuario_personalizado/" class="btn btn-neutral float-right" title="9. Modelo de Usuario Personalizado">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../07_formularios/" class="btn btn-neutral" title="7. Formularios"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../07_formularios/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../09_modelo_de_usuario_personalizado/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
